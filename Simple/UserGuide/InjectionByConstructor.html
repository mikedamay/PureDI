<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="cache-control" content="max-age=0" />
    <meta http-equiv="cache-control" content="no-cache" />
    <meta http-equiv="expires" content="0" />
    <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
    <meta http-equiv="pragma" content="no-cache" />    
    <title>Some Title</title>
    <link type="text/png" rel="icon" href="/glyphicons_free/glyphicons/png/glyphicons-30-notes-2.png" />
    <link type="text/css" href="/Simple/Content/bootstrap-3.3.7/css/bootstrap.css" rel="stylesheet"/>
</head>
<body>
<div class="container">
    <div class="row">
        <div class="col-sm-1"></div>
        <div class="col-sm-10">
            <h3 class="col-sm-10" style="color: blue">Injection by Constructor</h3>
            <!--<hr class="col-xs-12"/>-->
        </div>
        <div class="col-sm-1"></div>
    </div>
    <div class="row">
        <div class="col-sm-1"></div>
        <div class="col-sm-10">
            <p>It is not always convenient to inject beans directly into the
member variables of an object.  Apart from accommodating existing
code there are cases where processing is required on the injected
beans before the declaring object is ready for use.  Finally,
there are cases where different injections require different
constructors to be called.</p>
<p>In the case of multiple constructors the bean reference takes
a <code>ConstructorName</code> parameter which is matched up to a name
passed to the <code>[Constructor]</code> attribute.</p>
<p>The following code illustrates a simpple implementation:</p>
<div class="pre-scrollable">
<pre><code>using System;
using BeanNamesRunner;
using com.TheDisappointedProgrammer.IOCC;

[Bean]
public class Constructor
{
    [BeanReference]
    private ISomeService someService = null;

    public static void Main()
    {
        var constructor = new PDependencyInjector()
          .CreateAndInjectDependencies&lt;Constructor&gt;().rootBean;
        constructor.someService.DoMeAFavour();   // writes &quot;SomeData&quot;
    }
}

public interface ISomeService
{
    void DoMeAFavour();
}

[Bean]
public class SomeService : ISomeService
{
    private ISomeRepository _repo;
    [Constructor]
    public SomeService([BeanReference] ISomeRepository repo)
    {
        repo.Init(&quot;myConnection&quot;);
        _repo = repo;
    }
    public void DoMeAFavour()
    {
        Console.WriteLine(_repo.GetSomeData()); 
    }

}
[Bean]
public class SomeRepository : ISomeRepository
{
    private string _connectionString;

    public string GetSomeData()
    {
        return &quot;someData&quot;;
    }

    public void Init(string initString)
    {
        _connectionString = initString;
    }
}

public interface ISomeRepository
{
    string GetSomeData();
    void Init(string connectionSTring);
}


</code></pre>
</div>
<p>Notes:</p>

        </div>
        <div class="col-sm-1"></div>
    </div>
</div>
</body>
</html>